---
title: "Data Breach Notification Laws"
author: "Dean Gladish"
date: "July 31, 2019"
output:
  rmdformats::readthedown:
    self_contained: true
    thumbnails: true
    lightbox: true
    gallery: false
    highlight: tango
    css: custom.css
runtime: shiny
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
library(ggthemes)
library(shinyWidgets)
library(shinythemes)
library(shinythemes)

library(knitr)

```

***

## _Let's Begin_

***


This document is just an overview of the requirements, for different states, that service providers and other entities need to fulfill in order to comply with the state law in the event of a data incident/breach. I wanted to create a document which would also give some helpful graphs and which can be updated as needed.  





\ \ \ \ \ \ \ That's the intention of this document.    

```{r Load and wrangle data, message = FALSE, warning = FALSE, echo = FALSE}


library(readr)

statesData <- read_csv("statesSimplified.csv")


# Remove unneeded columns
statesData <- subset(statesData, select = c(1:14))

# Replace all NA values with the integer 0
statesData[is.na(statesData)] <- 0


library(ggplot2)



statesData$placeHolderColumn <- c(TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE, TRUE)




```

***


## _Filtering States_


***

__*<span style="color:gray">__Filter States by the Following Criteria:__</span>*__

```{r Shiny App for Data Breach Laws, echo = FALSE}
library(shiny)


# CSS Code for making the buttons look better
css <- 
"
a#more-apps-by-dean {
display: none;
}
body {
background: #fff;
}
.container {
margin: 0;
padding: 0px;
}
.green {
background: green;
}
#expr-container .selectize-input {
  font-size: 12px;
line-height: 12px;
}
#expr-container .selectize-dropdown {
font-size: 12px;
line-height: 12px;
}
#expr-container .selectize-dropdown-content {
max-height: 225px;
padding: 0;
}
#expr-container .selectize-dropdown-content .option {
border-bottom: 0px dotted #ccc;
}
#submitExpr {
font-weight: bold;
font-size: 12px;
padding: 0px 0px;
}
#helpText {
font-size: 12px;
}
#btn {
font-size: 12px;
}
"





axis_vars <- c(
  "Modified its Laws in 2018-2019" = "modifiedLawsin2018or2019", 
  "With DOB as PI" = "hasDOBasPI", 
  "With Online (vs. financial) account as PI" = "hasOnlineAccountsasPI", 
  "\"access\" vs. acquisition" = "requiresAcquisitionNotJustAccess", 
  "Harm analysis allowed or not" = "harmAnalysisAllowed", 
  "Government Involvement or not" = "governmentInvolvementRequired", 
  "Reporting threshold: number of individuals to notify Attorney General" = "thresholdNotifyAG",
  "Reporting threshold: number of individuals to notify consumer reporting agency" = "thresholdNotifyCRA", 
  "Time Frame within which to notify" = "timeFrame", 
  "Requirement for \"service provider\" to report to data owner immediately or not" = "serviceProvidersNotifyImmediately", 
  "Harm analysis required or not" = "harmAnalysisRequired", 
  "With Financial (vs. online) account as PI" = "financialAccountInformationisPI"
)





library(stringr)







#sidebarLayout
sidebarLayout(
  
  #sidebarPanel
    inputPanel(
  
      #helpText(""),
      
     
      selectInput("var", 
                  label = "",
                  choices = c(" " = toString(which(statesData$placeHolderColumn)),
                    "Modified its laws in 2018 or 2019" = toString(which(statesData$modifiedLawsin2018or2019)), "Date of Birth is PI" = toString(which(statesData$hasDOBasPI)), "Online Accounts are PI" = toString(which(statesData$hasOnlineAccountsasPI)), 
                  "Acquisition instead of just access counts as a data breach" = toString(which(statesData$requiresAcquisitionNotJustAccess)), 
                  "Harm Analysis is Allowed" = toString(which(statesData$harmAnalysisAllowed)),
                  "Government Involvement is Required" = toString(which(statesData$governmentInvolvementRequired)),
                  "Service Providers need to notify consumers immediately" = toString(which(statesData$serviceProvidersNotifyImmediately)), 
                  "Harm Analysis is Required" = toString(which(statesData$harmAnalysisRequired)),
                  "Information about Financial Accounts is PI" = toString(which(statesData$financialAccountInformationisPI)), 
                  "Attorney General Notification is Required in some way" = toString(which(statesData$notifyAGRequired))), 
                  selected = "all states"),
      
      selectInput("var2", 
                  label = "",
                  choices = c(" " = toString(which(statesData$placeHolderColumn)),
                    "Modified its laws in 2018 or 2019" = toString(which(statesData$modifiedLawsin2018or2019)), "Date of Birth is PI" = toString(which(statesData$hasDOBasPI)), "Online Accounts are PI" = toString(which(statesData$hasOnlineAccountsasPI)), 
                  "Acquisition instead of just access counts as a data breach" = toString(which(statesData$requiresAcquisitionNotJustAccess)), 
                  "Harm Analysis is Allowed" = toString(which(statesData$harmAnalysisAllowed)),
                  "Government Involvement is Required" = toString(which(statesData$governmentInvolvementRequired)),
                  "Service Providers need to notify consumers immediately" = toString(which(statesData$serviceProvidersNotifyImmediately)), 
                  "Harm Analysis is Required" = toString(which(statesData$harmAnalysisRequired)),
                  "Information about Financial Accounts is PI" = toString(which(statesData$financialAccountInformationisPI)), 
                  "Attorney General Notification is Required in some way" = toString(which(statesData$notifyAGRequired))), 
                  selected = "all states"),
      
      selectInput("var3", 
                  label = "",
                  choices = c(" " = toString(which(statesData$placeHolderColumn)),
                    "Modified its laws in 2018 or 2019" = toString(which(statesData$modifiedLawsin2018or2019)), "Date of Birth is PI" = toString(which(statesData$hasDOBasPI)), "Online Accounts are PI" = toString(which(statesData$hasOnlineAccountsasPI)), 
                  "Acquisition instead of just access counts as a data breach" = toString(which(statesData$requiresAcquisitionNotJustAccess)), 
                  "Harm Analysis is Allowed" = toString(which(statesData$harmAnalysisAllowed)),
                  "Government Involvement is Required" = toString(which(statesData$governmentInvolvementRequired)),
                  "Service Providers need to notify consumers immediately" = toString(which(statesData$serviceProvidersNotifyImmediately)), 
                  "Harm Analysis is Required" = toString(which(statesData$harmAnalysisRequired)),
                  "Information about Financial Accounts is PI" = toString(which(statesData$financialAccountInformationisPI)), 
                  "Attorney General Notification is Required in some way" = toString(which(statesData$notifyAGRequired))), 
                  selected = "all states"),
      
      selectInput("var4", 
                  label = "",
                  choices = c(" " = toString(which(statesData$placeHolderColumn)),
                    "Modified its laws in 2018 or 2019" = toString(which(statesData$modifiedLawsin2018or2019)), "Date of Birth is PI" = toString(which(statesData$hasDOBasPI)), "Online Accounts are PI" = toString(which(statesData$hasOnlineAccountsasPI)), 
                  "Acquisition instead of just access counts as a data breach" = toString(which(statesData$requiresAcquisitionNotJustAccess)), 
                  "Harm Analysis is Allowed" = toString(which(statesData$harmAnalysisAllowed)),
                  "Government Involvement is Required" = toString(which(statesData$governmentInvolvementRequired)),
                  "Service Providers need to notify consumers immediately" = toString(which(statesData$serviceProvidersNotifyImmediately)), 
                  "Harm Analysis is Required" = toString(which(statesData$harmAnalysisRequired)),
                  "Information about Financial Accounts is PI" = toString(which(statesData$financialAccountInformationisPI)), 
                  "Attorney General Notification is Required in some way" = toString(which(statesData$notifyAGRequired))), 
                  selected = "all states"),
      
      selectInput("var5", 
                  label = "",
                  choices = c(" " = toString(which(statesData$placeHolderColumn)),
                    "Modified its laws in 2018 or 2019" = toString(which(statesData$modifiedLawsin2018or2019)), "Date of Birth is PI" = toString(which(statesData$hasDOBasPI)), "Online Accounts are PI" = toString(which(statesData$hasOnlineAccountsasPI)), 
                  "Acquisition instead of just access counts as a data breach" = toString(which(statesData$requiresAcquisitionNotJustAccess)), 
                  "Harm Analysis is Allowed" = toString(which(statesData$harmAnalysisAllowed)),
                  "Government Involvement is Required" = toString(which(statesData$governmentInvolvementRequired)),
                  "Service Providers need to notify consumers immediately" = toString(which(statesData$serviceProvidersNotifyImmediately)), 
                  "Harm Analysis is Required" = toString(which(statesData$harmAnalysisRequired)),
                  "Information about Financial Accounts is PI" = toString(which(statesData$financialAccountInformationisPI)), 
                  "Attorney General Notification is Required in some way" = toString(which(statesData$notifyAGRequired))), 
                  selected = "all states"),
      
      selectInput("var6", 
                  label = "",
                  choices = c(" " = toString(which(statesData$placeHolderColumn)),
                    "Modified its laws in 2018 or 2019" = toString(which(statesData$modifiedLawsin2018or2019)), "Date of Birth is PI" = toString(which(statesData$hasDOBasPI)), "Online Accounts are PI" = toString(which(statesData$hasOnlineAccountsasPI)), 
                  "Acquisition instead of just access counts as a data breach" = toString(which(statesData$requiresAcquisitionNotJustAccess)), 
                  "Harm Analysis is Allowed" = toString(which(statesData$harmAnalysisAllowed)),
                  "Government Involvement is Required" = toString(which(statesData$governmentInvolvementRequired)),
                  "Service Providers need to notify consumers immediately" = toString(which(statesData$serviceProvidersNotifyImmediately)), 
                  "Harm Analysis is Required" = toString(which(statesData$harmAnalysisRequired)),
                  "Information about Financial Accounts is PI" = toString(which(statesData$financialAccountInformationisPI)), 
                  "Attorney General Notification is Required in some way" = toString(which(statesData$notifyAGRequired))), 
                  selected = "all states"),
      
      selectInput("var7", 
                  label = "",
                  choices = c(" " = toString(which(statesData$placeHolderColumn)),
                    "Modified its laws in 2018 or 2019" = toString(which(statesData$modifiedLawsin2018or2019)), "Date of Birth is PI" = toString(which(statesData$hasDOBasPI)), "Online Accounts are PI" = toString(which(statesData$hasOnlineAccountsasPI)), 
                  "Acquisition instead of just access counts as a data breach" = toString(which(statesData$requiresAcquisitionNotJustAccess)), 
                  "Harm Analysis is Allowed" = toString(which(statesData$harmAnalysisAllowed)),
                  "Government Involvement is Required" = toString(which(statesData$governmentInvolvementRequired)),
                  "Service Providers need to notify consumers immediately" = toString(which(statesData$serviceProvidersNotifyImmediately)), 
                  "Harm Analysis is Required" = toString(which(statesData$harmAnalysisRequired)),
                  "Information about Financial Accounts is PI" = toString(which(statesData$financialAccountInformationisPI)), 
                  "Attorney General Notification is Required in some way" = toString(which(statesData$notifyAGRequired))), 
                  selected = "all states"),
      
      selectInput("var8", 
                  label = "",
                  choices = c(" " = toString(which(statesData$placeHolderColumn)),
                    "Modified its laws in 2018 or 2019" = toString(which(statesData$modifiedLawsin2018or2019)), "Date of Birth is PI" = toString(which(statesData$hasDOBasPI)), "Online Accounts are PI" = toString(which(statesData$hasOnlineAccountsasPI)), 
                  "Acquisition instead of just access counts as a data breach" = toString(which(statesData$requiresAcquisitionNotJustAccess)), 
                  "Harm Analysis is Allowed" = toString(which(statesData$harmAnalysisAllowed)),
                  "Government Involvement is Required" = toString(which(statesData$governmentInvolvementRequired)),
                  "Service Providers need to notify consumers immediately" = toString(which(statesData$serviceProvidersNotifyImmediately)), 
                  "Harm Analysis is Required" = toString(which(statesData$harmAnalysisRequired)),
                  "Information about Financial Accounts is PI" = toString(which(statesData$financialAccountInformationisPI)), 
                  "Attorney General Notification is Required in some way" = toString(which(statesData$notifyAGRequired))), 
                  selected = "all states"),
      
      selectInput("var9", 
                  label = "",
                  choices = c(" " = toString(which(statesData$placeHolderColumn)),
                    "Modified its laws in 2018 or 2019" = toString(which(statesData$modifiedLawsin2018or2019)), "Date of Birth is PI" = toString(which(statesData$hasDOBasPI)), "Online Accounts are PI" = toString(which(statesData$hasOnlineAccountsasPI)), 
                  "Acquisition instead of just access counts as a data breach" = toString(which(statesData$requiresAcquisitionNotJustAccess)), 
                  "Harm Analysis is Allowed" = toString(which(statesData$harmAnalysisAllowed)),
                  "Government Involvement is Required" = toString(which(statesData$governmentInvolvementRequired)),
                  "Service Providers need to notify consumers immediately" = toString(which(statesData$serviceProvidersNotifyImmediately)), 
                  "Harm Analysis is Required" = toString(which(statesData$harmAnalysisRequired)),
                  "Information about Financial Accounts is PI" = toString(which(statesData$financialAccountInformationisPI)), 
                  "Attorney General Notification is Required in some way" = toString(which(statesData$notifyAGRequired))), 
                  selected = "all states"),
      
      sliderInput("range", 
                  label = "Range of Attorney General Notification Thresholds:",
                  min = min(statesData$thresholdNotifyAG), max = max(statesData$thresholdNotifyAG), value = c(min(statesData$thresholdNotifyAG), max(statesData$thresholdNotifyAG)), step = NULL)
    ,
    sliderInput("range2", 
                  label = "Range of Consumer Reporting Agency Notification Thresholds:",
                  min = min(statesData$thresholdNotifyCRA), max = max(statesData$thresholdNotifyCRA), value = c(min(statesData$thresholdNotifyCRA), max(statesData$thresholdNotifyCRA)), step = NULL)
    ,
sliderInput("range3", 
                  label = "Time Frame for making notifications:",
                  min = min(statesData$timeFrame), max = max(statesData$timeFrame), value = c(min(statesData$timeFrame), max(statesData$timeFrame)), step = NULL)
    ),
    
    mainPanel(
      textOutput("selected_var"),
      textOutput("min_max")
    )
  )



renderUI({
 
  HTML(str_replace_all(toString(
    paste(toString(statesData[
      
      intersect( #Variable 9
        
        as.integer(unlist(strsplit(input$var9, split = ", "))),
      
      intersect( #Variable 8
        
        as.integer(unlist(strsplit(input$var8, split = ", "))),
      
      intersect( #Variable 7
        
        as.integer(unlist(strsplit(input$var7, split = ", "))),
      
      intersect( #Variable 6
        
        as.integer(unlist(strsplit(input$var6, split = ", "))),
      
      intersect( #Variable 5
        
        as.integer(unlist(strsplit(input$var5, split = ", "))),
      
      intersect( #Variable 4
        
        as.integer(unlist(strsplit(input$var4, split = ", "))),
      
      intersect( #Variable 3
        
        as.integer(unlist(strsplit(input$var3, split = ", "))),
      
      intersect( #Variable 2
        
        as.integer(unlist(strsplit(input$var2, split = ", "))),
      
      
      intersect( #Variable 1
      
      as.integer(unlist(strsplit(input$var, split = ", "))), 
      
      
      #
      intersect(intersect(which(statesData$timeFrame >= input$range3[1]), which(statesData$timeFrame <= input$range3[2])), # Range 3
      
      intersect(
        
        
        intersect(which(statesData$thresholdNotifyAG >= input$range[1]), which(statesData$thresholdNotifyAG <= input$range[2])), # Range 1
        
        intersect(which(statesData$thresholdNotifyCRA >= input$range2[1]), which(statesData$thresholdNotifyCRA <= input$range2[2])) # Range 2
        
        
      )
      
      )
      
      #
      
      
      
      
      
      )
      
      )
      
      )
      
      )
      
      )
      
      )
      
      )
      
      )
      
      )
      
      ,]$State))
    )
    , ", ", "<br/>"))
})



#-------------------------------------------------------------------------------------------


```

***

## _Reporting Thresholds and Time Frame_

***


```{r, message = F, warning = F, echo = F}





axis_vars_graph2 <- c(
  "Reporting threshold: number of individuals to notify Attorney General" = "thresholdNotifyAG",
  "Reporting threshold: number of individuals to notify consumer reporting agency" = "thresholdNotifyCRA", 
  "Time Frame within which to notify" = "timeFrame"
)
fluidRow(
  shinyjs::useShinyjs(),
  tags$style(css),
  div(id = "expr-container",
  
  selectInput("yvar", label = "Y-axis variable", choices = axis_vars_graph2, 
              selected = "Cost_of_Revenue", width = "600px")
)
)

# This part is not the best way to code this.  How else can this be done (for example, by using aes_string instead of aes)?  
renderPlot({
  if (input$yvar == "thresholdNotifyAG") {
    ggplot(statesData) + 
  geom_bar(mapping = aes(x = reorder(State, thresholdNotifyAG), y = thresholdNotifyAG), stat = "identity") + 
  xlab("State") + 
  theme(panel.background = element_blank()) + 
  theme(axis.ticks = element_blank()) + 
  labs(title = "States and Threshold", y = "To Notify Attorney General") + 
  geom_hline(yintercept = seq(0, 1000, by = 250), colour = "gray", size = 1, linetype = 21) + 
  coord_flip() + 
  theme(axis.text.y = element_text(size = 7))
  }
  
  else if (input$yvar == "thresholdNotifyCRA") {
    ggplot(statesData) + 
  geom_bar(mapping = aes(x = reorder(State, thresholdNotifyCRA), y = thresholdNotifyCRA), stat = "identity") + 
  xlab("State") + 
  theme(panel.background = element_blank()) + 
  theme(axis.ticks = element_blank()) + 
  labs(title = "States and Threshold", y = "To Notify Consumer Reporting Agencies") + 
  geom_hline(yintercept = seq(0, 10000, by = 1000), colour = "gray", size = 1, linetype = 21) + 
  coord_flip() + 
  theme(axis.text.y = element_text(size = 7))
  }
  
  else if (input$yvar == "timeFrame") {
    ggplot(statesData) + 
  geom_bar(mapping = aes(x = reorder(State, timeFrame), y = timeFrame), stat = "identity") + 
  xlab("State") + 
  theme(panel.background = element_blank()) + 
  theme(axis.ticks = element_blank()) + 
  labs(title = "States and Threshold", y = "How Long to Disclose") + 
  geom_hline(yintercept = seq(0, 100, by = 10), colour = "gray", size = 1, linetype = 21) + 
  coord_flip() + 
  theme(axis.text.y = element_text(size = 7))
  }
})




```

***

## _Proportions of States Which Have Enacted Regulations_

***


```{r, message = F, warning = F, echo = F}






axis_vars_graphProportions <- c(
  "Modified Laws in 2018 or 2019" = "modifiedLawsin2018or2019", 
  "Date of Birth is Considered to be Personal Information" = "hasDOBasPI",
  "Online Accounts are Personal Information" = "hasOnlineAccountsasPI",
  "Definition of Data Breach Requires Acquisition (not just access)" = "requiresAcquisitionNotJustAccess", 
  "Harm Analysis is Allowed" = "harmAnalysisAllowed", 
  "Government Involvement is Required" = "governmentInvolvementRequired",
  "Service Providers shall be Notified Immediately" = "serviceProvidersNotifyImmediately",
  "Harm Analysis is Required" = "harmAnalysisRequired", 
  "Financial Account Information is Personal Information" = "financialAccountInformationisPI", 
  "Attorney General must be Notified" = "notifyAGRequired"
)
fluidRow(
  shinyjs::useShinyjs(),
  tags$style(css),
  div(id = "expr-container",
  
  selectInput("zvar", label = "Variable", choices = axis_vars_graphProportions, 
              selected = "Cost_of_Revenue", width = "600px")
  )
)

# Again, this part is not the best way to code this.  How else can this be done without hardcoding all the graphs?  
renderPlot({
  if (input$zvar == "modifiedLawsin2018or2019"){
    ggplot(data = statesData, mapping = aes(x = modifiedLawsin2018or2019, fill = modifiedLawsin2018or2019)) + 
  geom_bar() + 
  labs(title = "Proportion of States", x = "", y = "Number of States") + 
  theme(panel.background = element_blank()) + 
  geom_hline(yintercept = seq(0, 50, by = 10), col = "white", lwd = 1) + 
  theme(axis.text.y = element_blank(), axis.ticks = element_blank()) +
  geom_text(aes(label=..count..), stat="count", position = position_stack(), vjust = 1.5, color = "white") + 
  theme(legend.position = "none") + 
  scale_x_discrete(limit = c("FALSE", "TRUE"),
                     labels = c("Did not modify laws 2018-2019", "Modified laws 2018-2019"))
  }
  
  else if (input$zvar == "hasDOBasPI") {
    ggplot(data = statesData, mapping = aes(x = hasDOBasPI, fill = hasDOBasPI)) + 
  geom_bar() + 
  labs(title = "Proportion of States", x = "", y = "Number of States") + 
  theme(panel.background = element_blank()) + 
  geom_hline(yintercept = seq(0, 50, by = 10), col = "white", lwd = 1) + 
  theme(axis.text.y = element_blank(), axis.ticks = element_blank()) +
  geom_text(aes(label=..count..), stat="count", position = position_stack(), vjust = 1.5, color = "white") + 
  theme(legend.position = "none") + 
  scale_x_discrete(limit = c("FALSE", "TRUE"),
                     labels = c("Date of Birth is not PI", "Date of Birth is PI"))
  }
  
  else if (input$zvar == "hasOnlineAccountsasPI") {
    ggplot(data = statesData, mapping = aes(x = hasOnlineAccountsasPI, fill = hasOnlineAccountsasPI)) + 
  geom_bar() + 
  labs(title = "Proportion of States", x = "", y = "Number of States") + 
  theme(panel.background = element_blank()) + 
  geom_hline(yintercept = seq(0, 50, by = 10), col = "white", lwd = 1) + 
  theme(axis.text.y = element_blank(), axis.ticks = element_blank()) +
  geom_text(aes(label=..count..), stat="count", position = position_stack(), vjust = 1.5, color = "white") + 
  theme(legend.position = "none") + 
  scale_x_discrete(limit = c("FALSE", "TRUE"),
                     labels = c("Online Accounts are not PI", "Online Accounts are PI"))
  }
  
  else if (input$zvar == "requiresAcquisitionNotJustAccess") {
    ggplot(data = statesData, mapping = aes(x = requiresAcquisitionNotJustAccess, fill = requiresAcquisitionNotJustAccess)) + 
  geom_bar() + 
  labs(title = "Proportion of States", x = "", y = "Number of States") + 
  theme(panel.background = element_blank()) + 
  geom_hline(yintercept = seq(0, 50, by = 10), col = "white", lwd = 1) + 
  theme(axis.text.y = element_blank(), axis.ticks = element_blank()) +
  geom_text(aes(label=..count..), stat="count", position = position_stack(), vjust = 1.5, color = "white") + 
  theme(legend.position = "none") + 
  scale_x_discrete(limit = c("FALSE", "TRUE"),
                     labels = c("Access", "Acquisition"))
  }
  
  else if (input$zvar == "harmAnalysisAllowed") {
    ggplot(data = statesData, mapping = aes(x = harmAnalysisAllowed, fill = harmAnalysisAllowed)) + 
  geom_bar() + 
  labs(title = "Proportion of States", x = "", y = "Number of States") + 
  theme(panel.background = element_blank()) + 
  geom_hline(yintercept = seq(0, 50, by = 10), col = "white", lwd = 1) + 
  theme(axis.text.y = element_blank(), axis.ticks = element_blank()) +
  geom_text(aes(label=..count..), stat="count", position = position_stack(), vjust = 1.5, color = "white") + 
  theme(legend.position = "none") + 
  scale_x_discrete(limit = c("FALSE", "TRUE"),
                     labels = c("Harm Analysis Not Allowed", "Harm Analysis Allowed"))
  }
  
  else if (input$zvar == "governmentInvolvementRequired") {
    ggplot(data = statesData, mapping = aes(x = governmentInvolvementRequired, fill = governmentInvolvementRequired)) + 
  geom_bar() + 
  labs(title = "Proportion of States", x = "", y = "Number of States") + 
  theme(panel.background = element_blank()) + 
  geom_hline(yintercept = seq(0, 50, by = 10), col = "white", lwd = 1) + 
  theme(axis.text.y = element_blank(), axis.ticks = element_blank()) +
  geom_text(aes(label=..count..), stat="count", position = position_stack(), vjust = 1.5, color = "white") + 
  theme(legend.position = "none") + 
  scale_x_discrete(limit = c("FALSE", "TRUE"),
                     labels = c("Government Involvement is Required", "Government Involvement is Not Required"))
  }
  
  else if (input$zvar == "serviceProvidersNotifyImmediately") {
    ggplot(data = statesData, mapping = aes(x = serviceProvidersNotifyImmediately, fill = serviceProvidersNotifyImmediately)) + 
  geom_bar() + 
  labs(title = "Proportion of States", x = "", y = "Number of States") + 
  theme(panel.background = element_blank()) + 
  geom_hline(yintercept = seq(0, 50, by = 10), col = "white", lwd = 1) + 
  theme(axis.text.y = element_blank(), axis.ticks = element_blank()) +
  geom_text(aes(label=..count..), stat="count", position = position_stack(), vjust = 1.5, color = "white") + 
  theme(legend.position = "none") + 
  scale_x_discrete(limit = c("FALSE", "TRUE"),
                     labels = c("Service Providers do not need to immediately notify", "Service Providers need to immediately notify"))
  }
  
  else if (input$zvar == "harmAnalysisRequired") {
    ggplot(data = statesData, mapping = aes(x = harmAnalysisRequired, fill = harmAnalysisRequired)) + 
  geom_bar() + 
  labs(title = "Proportion of States", x = "", y = "Number of States") + 
  theme(panel.background = element_blank()) + 
  geom_hline(yintercept = seq(0, 50, by = 10), col = "white", lwd = 1) + 
  theme(axis.text.y = element_blank(), axis.ticks = element_blank()) +
  geom_text(aes(label=..count..), stat="count", position = position_stack(), vjust = 1.5, color = "white") + 
  theme(legend.position = "none") + 
  scale_x_discrete(limit = c("FALSE", "TRUE"),
                     labels = c("Harm Analysis is Not Required", "Harm Analysis is Required"))
  }
  
  else if (input$zvar == "financialAccountInformationisPI") {
    ggplot(data = statesData, mapping = aes(x = financialAccountInformationisPI, fill = financialAccountInformationisPI)) + 
  geom_bar() + 
  labs(title = "Proportion of States", x = "", y = "Number of States") + 
  theme(panel.background = element_blank()) + 
  geom_hline(yintercept = seq(0, 50, by = 10), col = "white", lwd = 1) + 
  theme(axis.text.y = element_blank(), axis.ticks = element_blank()) +
  geom_text(aes(label=..count..), stat="count", position = position_stack(), vjust = 1.5, color = "white") + 
  theme(legend.position = "none") + 
  scale_x_discrete(limit = c("FALSE", "TRUE"),
                     labels = c("Financial Account Information is Not PI", "Financial Account Information is PI"))
  }
  
  else if (input$zvar == "notifyAGRequired") {
    ggplot(data = statesData, mapping = aes(x = notifyAGRequired, fill = notifyAGRequired)) + 
  geom_bar() + 
  labs(title = "Proportion of States", x = "", y = "Number of States") + 
  theme(panel.background = element_blank()) + 
  geom_hline(yintercept = seq(0, 50, by = 10), col = "white", lwd = 1) + 
  theme(axis.text.y = element_blank(), axis.ticks = element_blank()) +
  geom_text(aes(label=..count..), stat="count", position = position_stack(), vjust = 1.5, color = "white") + 
  theme(legend.position = "none") + 
  scale_x_discrete(limit = c("FALSE", "TRUE"),
                     labels = c("AG Notification Not Required", "AG Notification Required"))
  }

})



  
```

***
## _Reference Table_
***

An "X" means that the state has that quality. 

```{r, message = F, warning = F, echo = F}
statesDataPresentable <- statesData

colnames(statesDataPresentable) <- c("State", "Modified 2018-2019", "DOB is PI", "Online Accounts are PI", "Acquisition", "Harm Analysis Allowed", "Government Involvement Required", "Notify AG", "Notify CRA", "Time Frame", "Notify SP Immediately", "Harm Analysis Required", "Financial Account Information is PI", "Notify AG Required", "Is a State")

statesDataPresentable <- statesDataPresentable[,-ncol(statesDataPresentable)]

statesDataPresentable$`Modified 2018-2019` <- ifelse(statesDataPresentable$`Modified 2018-2019` == "TRUE", "X", "")

statesDataPresentable$`DOB is PI` <- ifelse(statesDataPresentable$`DOB is PI` == "TRUE", "X", "")

statesDataPresentable$`Online Accounts are PI` <- ifelse(statesDataPresentable$`Online Accounts are PI` == "TRUE", "X", "")

statesDataPresentable$Acquisition <- ifelse(statesDataPresentable$Acquisition == "TRUE", "X", "")

statesDataPresentable$`Harm Analysis Allowed` <- ifelse(statesDataPresentable$`Harm Analysis Allowed` == "TRUE", "X", "")

statesDataPresentable$`Government Involvement Required` <- ifelse(statesDataPresentable$`Government Involvement Required` == "TRUE", "X", "")

statesDataPresentable$`Notify SP Immediately` <- ifelse(statesDataPresentable$`Notify SP Immediately` == "TRUE", "X", "")

statesDataPresentable$`Harm Analysis Required` <- ifelse(statesDataPresentable$`Harm Analysis Required` == "TRUE", "X", "")

statesDataPresentable$`Financial Account Information is PI` <- ifelse(statesDataPresentable$`Financial Account Information is PI` == "TRUE", "X", "")

statesDataPresentable$`Notify AG Required` <- ifelse(statesDataPresentable$`Notify AG Required` == "TRUE", "X", "")


library(knitr)
library(kableExtra)
statesDataPresentable %>% kable() %>% kable_styling() %>% kable_styling(bootstrap_options = c( "scale_down", "hover", "condensed", "responsive", full_width = F), latex_options = c( "scale_down", "hover", "condensed", "responsive", full_width = F), font_size = 12)

# This doesn't really work
library(grid)
library(gridExtra)




```

\ \ \ \ \ \ \ After introducing this table I want to introduce some sources which were the most effective to me. These are Perkins Coie (https://www.perkinscoie.com/en/news-insights/security-breach-notification-chart.html), Baker Law (https://www.bakerlaw.com/files/Uploads/Documents/Data%20Breach%20documents/Data_Breach_Charts.pdf, https://www.bakerlaw.com/BreachNotificationLawMap) and Davis Wright Tremaine (https://www.dwt.com/gcp/state-data-breach-statutes).  \\

Furthermore it would be good to clarify some things. The Notify AG threshold is describing number of residents. When the threshold of consumers affected is 0 for notifying the Attorney General, this indicates that a specific number has not been specified (however the Attorney General may still have to be notified).  

If the threshold to notify the Attorney General is 0, this could indicate that a person must also provide notice of a breach to the Attorney General, whenever (and no later than the time when) notice is provided to residents. Furthermore the laws should be consulted because for instance, in Idaho the entity affected, if a public agency, must notify the Attorney General within 24 hours of discovery.  

However, if the threshold to notify the Attorney General is 1 this indicates that the Attorney General must be notified whenever individuals must be notified, or whenever there is a breach.  Again, the specific laws must be consulted in these cases.  

Other cases where Notify AG is 1 refer to cases like New Jersey where it's not the AG but rather the Division of State Police in the Law Department of Law and Public Safety must be notified regarding a breach prior to notifying customers.  

Similarly, Notify AG is 1 for Puerto Rico, a "state" for which the Department of Consumer Affairs must be notified regarding a breach as expeditiously as possible.  

In general it would be helpful to make sure the AG must not be contacted when the value of Notify AG is 1 or 0.  

The 1000 guideline for notifying Consumer Reporting Agencies for South Carolina specifically refers to the Consumer Protection Division of the Department of Consumer Affairs.  

The method of delivery for notifying the AG may vary as well, including mail, electronic mail and form delivery.  



California's time frame notification requirement (15 business days) only applies to medical-specific data breaches.  

While Connecticut gives 90 days to notify residents, the Connecticut Insurance Department needs to be notified no later than **five calendar days** after the incident is identified.  

When the time frame for notifying residents is listed as 0, this typically means that notification must still be made as expediently as possible.  

Furthermore, the time frame for notifying residents is typically the same as the time frame for notifying the Attorney General.  

If notification was previously delayed based on the determination of law enforcement that notification will impede a criminal investigation or jeopardize homeland or national security, then Maryland's notification time frame is 30 (instead of 45) days starting from the re-evaluation of this determination.  Similarly, in the same case South Dakota's time frame is 30 (instead of 60) days.  

The "Government Involvement Required" variable simply describes whether the government needs to get involved; specifically, whether the state does not permit a private cause of action in any circumstance.  This definition of whether or not the government must be involved is very strong.  




***
## _References_
***

\ \ \ \ \ \ \ This section is just a references section.  I used a variety of sources (various law firms, etc.) and the main gist of this sheet is to demonstrate facts about the laws themselves which can be verified independently as well.  The following is a list of the actual acts which I have looked at: 

* https://privacy.huntonwilliamsblogs.com/wp-content/uploads/sites/18/2018/04/Alabama-Data-Breach-Notification-Act-of-2018.pdf (Act for Alabama)
* https://www.azleg.gov/legtext/53leg/2r/bills/hb2154p.pdf (Arizona)
* https://leginfo.legislature.ca.gov/faces/billTextClient.xhtml?bill_id=201720180SB1121 (California)
* http://www.ilga.gov/legislation/fulltext.asp?DocName=10100SB1624lv&SessionID=108&GA=101&DocTypeID=SB&DocNum=1624&print=true (Illinois)
* http://www.mainelegislature.org/legis/bills/bills_129th/billtexts/SP027501.asp (Maine)
* http://mgaleg.maryland.gov/webmga/frmMain.aspx?id=HB1154&stab=01&pid=billpage&tab=subject3&ys=2019RS (Maryland)
* https://malegislature.gov/Bills/190/H4806 (Massachusetts)
* https://www.njleg.state.nj.us/2018/Bills/S0500/52_R1.PDF (New Jersey)
* https://legislation.nysenate.gov/pdf/bills/2019/S5575B (New York)
* https://olis.leg.state.or.us/liz/2019R1/Downloads/MeasureDocument/SB684 (Oregon)
* https://capitol.texas.gov/tlodocs/86R/billtext/html/HB04390H.htm (Texas)
* http://lawfilesext.leg.wa.gov/biennium/2019-20/Pdf/Amendments/Senate/1071-S%20AMS%20WM%20S3925.1.pdf (Washington)

__Some more information on states which modified their laws in 2019 and 2018__  

* https://www.jdsupra.com/legalnews/year-to-date-changes-to-state-data-21648/
* https://blogs.claconnect.com/residentialmortgage/arkansas-amends-its-personal-information-protection-act/
* https://www.csoonline.com/article/3339565/what-is-biometrics-and-why-collecting-biometric-data-is-risky.html
    + During the calendar year 2019, Arkansas passed House Bill 1943 which amends and revises the Personal Information Protection Act (part of Arkansas state law). HB 1943 revises Arkansas Code section 4-110-103(7) to include biometric data in the definition of personal information (Biometric data is data generated by automatic measurements on an individual’s biological characteristics such as fingerprints, retinal or iris scans, facial recognition, DNA and other identifiers including behavioral identifiers).  
    + So biometric data is considered to be personal information. Additionally, the bill (HB 1943) amends Arkansas Code section 4-110-105(b) which requires that in the event of a data breach involving more than 1,000 individuals a notification breach must also be made to the attorney general. Breached entities are now required to (after a data breach has been detected) retain a copy of the written determination of the data breach and of supporting documentation for five years. Furthermore the entity must provide documentation within 30 days of an attorney general’s written request. 
    + House Bill 1943 became law on April 15, 2019 and became effective on July 23, 2019.  

* https://www.huntonprivacyblog.com/2019/06/04/illinois-general-assembly-approves-breach-notification-amendment-to-personal-information-protection-act/
    + On May 27, 2019 the Illinois General Assembly passed amendments to the Illinois Personal Information Protection Act’s section on data notifications. In addition to obligations to notify the affected individuals, data collectors are also required to notify the Illinois attorney general if the data breach involves personal information from over 500 Illinois residents. Data collectors must notify the Office of the Attorney General (as in Arkansas) in the most expedient time possible and without unreasonable delay, but no later than when notice is given to the affected individuals. 
    + The amendment also grants the Attorney General the authority to publish the name of the data collector, the types of personal information compromised and other relevant information. The aim of the amendment is to ensure timely notification of the breach to the residents of Illinois.   

* https://www.jdsupra.com/legalnews/maryland-privacy-act-amendments-impact-16436/
    + On April 30, 2019 Maryland passed amendments to the security breach notification requirements of Maryland’s Personal Information Protection Act, which became effective on October 1, 2019.  
    + Specifically, this one is for businesses which maintain computerized personal data but do not own it. These businesses (any business which maintains computerized data) will now be required to perform a prompt and reasonable investigation to identify the risk of harm to the compromised individuals. And they are required to notify the owner of the personal data no later than 45 days after the discovery of the breach. Businesses maintaining the data cannot charge its owner a fee for providing the necessary information (necessary to make the required notifications).  

* https://www.huntonprivacyblog.com/2019/05/17/new-jersey-amends-data-breach-law-to-include-online-account-information/
* https://www.njleg.state.nj.us/2018/Bills/S0500/52_S1.PDF
    + On May 10, 2019, New Jersey Governor Phil Murphy signed into law a bill that amends New Jersey’s data breach notification law.  
    + Businesses subject to the law must notify New Jersey residents of a breach of security affecting a resident’s user name, email password or any other account holder identifying information, in combination with any password or security question and answer that would permit access to an online account. Basically, the bill adds account holder identifying information (including first and last name) in combination with any password or security question and answer that would permit access to an online account to the list of breaches which require disclosure. 
    + Essentially it expands the notion of personal information to include online account information to the preexisting list (Social Security number, driver’s license number, credit or debit card number in combination with any required security code, access code or password permitting access to the related individual’s financial account). The bill itself requires all entities compiling or maintaining computerized records that include information requiring access to an online account to disclose breaches of security.   

\ \ \ \ \ \ \ On May 24, 2019, Governor Kate Brown signed into law amendments to the Oregon Consumer Identity Theft Protection Act which distinguish between a “covered entity” and a “vendor”; similarly to the “controller” and “processor” distinction in the GDPR.  



__Additional Resources__

Additional resources to verify these findings:  


* https://www.dataprotectionreport.com/2019/06/nine-states-pass-new-and-expanded-data-breach-notification-laws/
    + (same findings as the previous link which is https://www.jdsupra.com/legalnews/year-to-date-changes-to-state-data-21648/).
    + http://www.ncsl.org/research/telecommunications-and-information-technology/2018-security-breach-legislation.aspx (relevant).  
* https://legislation.nysenate.gov/pdf/bills/2019/S5575B
    + Demonstrates that New York has an amendment which is headed to the governor’s desk (https://www.jdsupra.com/legalnews/updates-to-new-york-state-s-breach-28999/).  
* https://info.digitalguardian.com/rs/768-OQW-145/images/the-definitive-guide-to-us-state-data-breach-laws.pdf “The Definitive Guide to U.S. State Data Breach Laws”
* https://www.huntonprivacyblog.com/2018/04/03/alabama-becomes-final-state-enact-data-breach-notification-law/

* https://www.consumerfinancemonitor.com/2018/04/19/arizona-strengthens-and-expands-data-breach-notification-law/
* https://www.azleg.gov/legtext/53leg/2r/bills/hb2154p.pdf
* https://privacylaw.proskauer.com/2018/09/articles/california/california-legislature-passes-amendments-to-the-california-consumer-privacy-act/
* https://www.huntonprivacyblog.com/2018/06/14/colorado-amends-data-breach-notification-law-enacts-data-security-requirements/


* Reporting threshold: number of individuals
    + https://www.itgovernanceusa.com/data-breach-notification-laws
    + https://privacylaw.proskauer.com/uploads/file/Arkansas%204-110-%20101%20to%20108.pdf

* http://arc-sos.state.al.us/PAC/SOSACPDF.001/A0012674.PDF
    + “Section 6. (a) If the number of individuals a covered entity is required to notify under Section 5 exceeds 1,000, the entity shall provide written notice of the breach to the Attorney General as expeditiously as possible and without unreasonable delay.”

* https://www.bakerlaw.com/files/Uploads/Documents/Data%20Breach%20documents/Data_Breach_Charts.pdf
    + See “States That Require a Risk-of-Harm Analysis in Determining When Notification Is Triggered”, “States That Require Notice to Attorney General or State Agency” and “States That Require Notification Within a Specific Time Frame.”

* https://www.perkinscoie.com/en/news-insights/security-breach-notification-chart-alaska.html
    + Perkins Coie is a good resource
* https://www.bakerlaw.com/files/Uploads/Documents/Data%20Breach%20documents/State_Data_Breach_Statute_Form.pdf
    + Explains definitions and statutes (definition of PI).  Includes access versus acquisition, date of birth as PI, Online or financial accounts as PI and whether third parties need to notify their consumers or not.  
    
* https://www.perkinscoie.com/en/news-insights/security-breach-notification-chart-arizona.html
	
* https://www.foley.com/en/insights/publications/2019/01/state-data-breach-notification-laws

* https://www.informationbytes.com/2018/10/pii-breach-notification-statutes-rules-keep-changing/
    + It looks like North Dakota is indeed the only state which considers birth date to be personal information.This website also provides information about whether online accounts are considered to be PI.  

* https://www.dwt.com/gcp/state-data-breach-statutes
    + Another good resource for seeing whether personal information covers financial accounts or covers online accounts, contains a map.  

* https://www.bakerlaw.com/BreachNotificationLawMap 
    + Another map describing whether harm analysis is allowed or not as well as whether private cause of action is allowed.  
    
* https://www.americanbar.org/news/abanews/publications/youraba/2016/may-2016/state-data-breach-notification-laws-just-got-crazier/ 
    + “And Tennessee is one of 15 states that specifically provides for a private cause of action where the data breach notification statutes are not complied with.”

* https://www.perkinscoie.com/en/news-insights/security-breach-notification-chart-alabama.html
    + Perkins Coie describes whether service providers (third parties) need to notify their clients immediately upon the discovery of a data breach. 
    
* https://www.jdsupra.com/legalnews/arizona-strengthens-data-breach-42989/


* https://www.irmi.com/articles/expert-commentary/state-breach-identification-laws-personal-information-definition#9

* https://www.dataprivacymonitor.com/data-breach-notification-laws/last-but-not-least-alabama-enacts-a-data-breach-notification-law-with-strong-notification-and-security-requirements/




&nbsp;
<hr />
<p style="text-align: center;">By <a href="https://github.com/gladishd/">Dean Gladish</a></p>
<p style="text-align: center;"><span style="color: #808080;"><em>gladish.dean@gmail.com</em></span></p>

<!-- Add icon library -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">



&nbsp;


